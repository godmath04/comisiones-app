<div class="wrap">
  <h1>Comisiones</h1>

  <div *ngIf="error" style="color:#b00020;margin:.5rem 0">Error: {{error}}</div>

  <form (ngSubmit)="calcular()">
    <label>
      Fecha inicio:
      <input type="date" [(ngModel)]="fechaInicio" name="fechaInicio" required>
    </label>
    &nbsp;
    <label>
      Fecha fin:
      <input type="date" [(ngModel)]="fechaFin" name="fechaFin" required>
    </label>
    &nbsp;
    <button type="submit" [disabled]="cargando">Calcular</button>
  </form>

  <div *ngIf="cargando" style="margin-top:.75rem">Calculando…</div>

  <table *ngIf="!cargando && filas?.length" border="1" cellpadding="6" style="margin-top:1rem; width:100%">
    <thead>
      <tr>
        <th>Vendedor</th>
        <th>Total Ventas</th>
        <th>% Aplicado</th>
        <th>Comisión</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let f of filas">
        <td>{{ f.vendedor }}</td>
        <td>{{ f.totalVentas | number:'1.2-2' }}</td>
        <td>{{ (f.porcentajeAplicado * 100) | number:'1.2-2' }}%</td>
        <td>{{ f.comisionCalculada | number:'1.2-2' }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!cargando && !filas?.length" style="margin-top:1rem;opacity:.7">
    Sin resultados.
  </div>
</div>
